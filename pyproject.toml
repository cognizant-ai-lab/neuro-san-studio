[tool.ruff]
line-length = 119
target-version = "py312"
exclude = [
    "venv",
    ".venv",
    "dist",
]

[tool.ruff.lint]
preview = true
explicit-preview-rules = true
select = [
    "E",
    "W",
    "F",
    "I",
    "PL",
    "BLE001",
    "SLF001",
    "TRY002",
    "SIM115",
    "PLR0914",
    "PLR0917",
]
ignore = [
    "PLR2004",
    "PLW2901",
]

[tool.ruff.lint.isort]
force-single-line = true
known-first-party = ["apps"]

[tool.ruff.lint.pylint]
max-args = 5

[tool.ruff.format]
skip-magic-trailing-comma = false

[tool.pytest.ini_options]
testpaths = ["tests"]
python_files = "test_*.py"
python_classes = "Test*"
python_functions = "test_*"
addopts = "--verbose --cov=. --cov-report=term-missing --no-cov-on-fail"
markers = [
    "existing_marker: ...",
    "integration: integration tests that may be slow or hit external services",
]

[tool.coverage.run]
omit = ["tests/*", "*/venv/*"]
