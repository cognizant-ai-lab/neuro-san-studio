{
    "llm_config": {
        "model_name": "azure-gpt-4o",
        "temperature": 0.3
    },
    "max_iterations": 15000,
    "max_execution_seconds": 300,
    "commondefs": {
        "replacement_strings": {
            "instructions_prefix": """
You are in charge of a portion of the capabilities in pharmaceutical company.
Only answer inquiries that are directly within your area of expertise,
from the company's perspective.
Do not try to help for personal matters.
Do not mention what you can NOT do. Only mention what you can do.
            """,
            "aaosa_instructions": """
When you receive an inquiry, you will:

    1. Call your tools to determine which down-chain agents in your tools are
       responsible for all or part of it.
    2. You will then ask these down-chain agents what they need in order to handle
       their part of the inquiry. Once the requirements are gathered, you will,
    3. Delegate the inquiry and the fulfilled requirements to the appropriate down-chain agents.
    4. Once all down-chain agents respond, you will compile their responses and return the final response.

You may, in turn, be called by other agents in the system and have to act as a down-chain to them.
            """
        },
        "replacement_values": {
            "aaosa_call": {
                "description": "Depending on the mode, returns a natural language string in response.",
                "parameters": {
                    "type": "object",
                    "properties": {
                        "inquiry": {
                            "type": "string",
                            "description": "The user's inquiry"
                        },
                        "mode": {
                            "type": "string",
                            "description": "Mode to determine responsibility, gather requirements, or return a response."
                        }
                    },
                    "required": ["inquiry", "mode"]
                }
            },
            "aaosa_command": "Explain if you can respond to all or parts of the inquiry and what you need in order to respond, if anything."
        }
    },
    "tools": [
        {
            "name": "access_request_orchestrator_agent",
            "function": {
                "description": "Main agent for company employees' access requests."
            },
            "instructions": "IMPORTANT: Before processing any inquiry, call dataiku_validation_service with tool_name='prompt_retriever' and agent_name='access_request_orchestrator_agent' to get your detailed instructions. Once you have retrieved your full instructions, follow them completely for all subsequent interactions.",
            "tools": [
                "dataiku_validation_service",
                "ons_agent"
            ],
            "llm_config": {
                "model_name": "azure-gpt-4o",
                "temperature": 0.3
            }
        },
        // --- MCP ADAPTER FOR DATAIKU VALIDATION SERVICE ---
        {
            "name": "dataiku_validation_service",
            "description": "A remote service for handling all Dataiku-related validation checks, including user identity, training, and policy compliance. Available tools: user_verification, training_requirements, training_completions, approvals_required, prompt_retriever.",
            "function": {
                "description": "Access Dataiku validation tools via MCP server. Use tool_name parameter to specify which tool to invoke.",
                "parameters": {
                    "type": "object",
                    "properties": {
                        "tool_name": {
                            "type": "string",
                            "description": "Name of the MCP tool to invoke (user_verification, training_requirements, training_completions, approvals_required, prompt_retriever)"
                        },
                        "env": {
                            "type": "string",
                            "description": "Environment type (DEV, QA, PROD, CORE++) - required for training_requirements and approvals_required"
                        },
                        "training_name": {
                            "type": "string",
                            "description": "Training name - required for training_completions"
                        },
                        "certificate_id": {
                            "type": "string",
                            "description": "Certificate ID - required for training_completions"
                        },
                        "access_type": {
                            "type": "string",
                            "description": "Access type (Read, Write, Execute) - required for approvals_required"
                        },
                        "agent_name": {
                            "type": "string",
                            "description": "Agent name - required for prompt_retriever"
                        }
                    },
                    "required": ["tool_name"]
                }
            },
            "class": "dataiku_mcp.mcp_tool_adapter.MCPToolAdapter",
            "args": {
                "base_url": "http://localhost:8000/mcp/"
            }
        },
        {
            "name": "ons_agent",
            "function": "aaosa_call",
            "instructions": "IMPORTANT: Before processing any inquiry, call dataiku_validation_service with tool_name='prompt_retriever' and agent_name='ons_agent' to get your detailed instructions. Once you have retrieved your full instructions, follow them completely for handling the inquiry.",
            "llm_config": {
                "model_name": "azure-gpt-4o",
                "temperature": 0.3
            },
            "tools": [
                "dataiku_validation_service",
                "ons_ticket_verification_tool",
                "ons_ticket_creator_tool"
            ]
        },
        // --- ONS (ServiceNow) TOOLS (LOCAL IMPLEMENTATIONS) ---
        {
            "name": "ons_ticket_verification_tool",
            "function": {
                "description": "Simple validator for ServiceNow ticket numbers.",
                "parameters": {
                    "type": "object",
                    "properties": {
                        "ticket_number": {"type": "string", "description": "Ticket number"}
                    },
                    "required": ["ticket_number"]
                }
            },
            "class": "dataiku.ons_ticket_verification_tool.ONSTicketVerificationTool"
        },
        {
            "name": "ons_ticket_creator_tool",
            "function": {
                "description": "Generate a mock ServiceNow ticket number for access requests.",
                "parameters": {
                    "type": "object",
                    "properties": {
                        "access_request_details": {
                            "type": "string",
                            "description": "Details of the access request including environment and access type"
                        }
                    },
                    "required": ["access_request_details"]
                }
            },
            "class": "dataiku.ons_ticket_creator_tool.ONSTicketCreatorTool"
        }
    ]
}